.PHONY: help install clean dev build test install-browser install-node install-bun install-edge

# Default target
help:
	@echo "Available targets:"
	@echo "  make install    - Install dependencies for all examples"
	@echo "  make clean      - Clean all node_modules and build artifacts"
	@echo "  make dev        - Run dev servers for all examples in parallel"
	@echo "  make build      - Build all examples"
	@echo "  make test       - Run tests for all examples"

# Install all dependencies
install: install-browser install-node install-bun install-edge
	@echo "âœ… All dependencies installed"

install-browser:
	@echo "ðŸ“¦ Installing browser dependencies..."
	@cd browser && pnpm install

install-node:
	@echo "ðŸ“¦ Installing node dependencies..."
	@cd node && npm install

install-bun:
	@echo "ðŸ“¦ Installing bun dependencies..."
	@cd bun && bun install

install-edge:
	@echo "ðŸ“¦ Installing edge dependencies..."
	@cd edge && npm install

# Clean all
clean:
	@echo "ðŸ§¹ Cleaning all examples..."
	@rm -rf browser/node_modules browser/dist
	@rm -rf node/node_modules
	@rm -rf bun/node_modules
	@rm -rf edge/node_modules edge/.wrangler
	@echo "âœ… Clean completed"

# Development - run all in parallel
dev:
	@echo "ðŸš€ Starting development servers..."
	@./scripts/dev-parallel.sh

# Build all
build:
	@echo "ðŸ”¨ Building all examples..."
	@cd browser && npm run build
	@echo "âœ… Build completed"

# Test all
test:
	@echo "ðŸ§ª Running tests..."
	@./scripts/test-parallel.sh
